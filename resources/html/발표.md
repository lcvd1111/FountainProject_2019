<h1>발표</h1>

<h2>1. 외형 및 기본적인 기능 소개</h2>
앞모습<br/>
<img src="../images/앞모습.jpg" width="500" height="300"/>
<br/>

뒷모습<br/>
<img src="../images/뒷모습.jpg" width="500" height="300"/>
<br/>

컨트롤러<br/>
<img src="../images/컨트롤러.jpg" width="500" height="300"/>
<br/>

컨트롤러 - 조작 및 녹화 모드<br/>
<img src="../images/컨트롤러2.jpg" width="500" height="300"/>
<br/>

컨트롤러 - 재생 모드<br/>
<img src="../images/컨트롤러3.jpg" width="500" height="300"/>
<br/>
<br/>
<br/>

<h2>2. 첫번째 기능 소개 - 프로그래밍이 가능함</h2>
우리 조의 제일 우선된 주제는 '사용자가 직접 패턴의 프로그래밍이 가능한 분수대' 였다.<br/>

그렇다면 도대체 어떤 인터페이스를 이용해야 사용자가 직접 분수의 패턴을 프로그래밍할 수 있을까?<br>
이것이 이번 프로젝트의 가장 큰 고민 중 하나였다.
<br/>
이 고민에 대한 해결책으로써 제일 먼저 들었던 생각은 바로 '블록'을 이용한 것이었다.
<img src="../images/block.png" width="500" height="300" />
<br/>그러나 이 아이디어는 굉장히 구현하기 어렵다는 것을 몇차례의 시도 후 곧바로 알게 되었다.

<br/>그리고 나서 계속하여 고민을 하다가, 마침내 다음과 같은 아이디어가 떠올랐다.
<br/><img src="../images/record.jpg" />
<br/>만약 4개의 워터펌프를 각각의 버튼으로 on off 제어가 가능하다면, 그냥 그 on off 기록을 녹화한 다음에 다시 반복적으로 재생하는 기능만 구현해주면 사용자가 직접 분수의 패턴을 간단하게 프로그래밍할 수 있게 되지 않을까?

<br/>이러한 아이디어를 이후 조사해보니, 다행히도 "Arduino Record and Play"라는 키워드로 검색하면 웹상에서의 자료가 어느정도 나왔다. 그리고 몇번의 시도 후에 실제 구현을 완료할 수 있게 되었다.

(프로그래밍 가능한 분수대 완성 모습↓)
<br/>
<a href="https://www.youtube.com/watch?v=wFLT80PlnDE">
  <img src="https://img.youtube.com/vi/wFLT80PlnDE/hqdefault.jpg" />
</a><br/>
(이미지 클릭하면 동영상 링크로 이동.)
<br/><br/>
이 기능의 구현을 위해서는, 녹화모드 동안 총 네가지 종류의 변수가 기록된다.
<ol>
  <li>어떤 워터펌프가 켜져있는지</li>
  <li>그 워터펌프가 얼마나 오래 켜져있는지</li>
  <li>어떤 워터펌프가 꺼져있는지</li>
  <li>그 워터펌프가 얼마나 오래 꺼져있었는지</li>
</ol>

그리고 재생모드일 때는, 저 네가지 종류의 변수를 그대로 되풀이하며 반복적으로 재생하게 된다.<br/>
더 자세한 내용은 코드에서 설명하도록 하기로 한다.

(시연 - 버튼 한개, 파도타기, 버튼 동시에 입력, 계속 출력하게 하기)
<br/>

<h2>3. 두번째 기능 소개 - 음악 반응</h3>

또다른 기능도 구현하고 싶었다.<br/>
사용자가 굳이 패턴을 직접 프로그래밍 할 필요 없이, 사용자가 좋아하는 노래를 입력해주기만 하면, 그 노래에 맞춰 자동으로 반응을 하는 분수대를 만드는 것도 좋을 것 같았다.<br/>
그렇다면 이를 어떤 형태로 구현하면 좋을까를 고민해보니, 다음과 같은 아이디어가 떠올랐다.
<img src="../images/spectrum.gif" width="500" height="300"/>
<br/><br/>
분수대가 총 네개의 워터펌프로 이루어져 있으니, 미디어 플레이어같은 프로그램에서 자주 등장하는 오디오 스펙트럼과 같이, 워터 펌프 하나당 오디오 스펙트럼 기둥 하나를 담당하게 하면 좋을 것 같다는 생각이 들었다.

(음악 반응 분수대 완성 모습↓)
<br/>
<a href="https://www.youtube.com/watch?v=lS8o3Cqs0Y8">
  <img src="https://img.youtube.com/vi/lS8o3Cqs0Y8/hqdefault.jpg" />
</a><br/>
(이미지 클릭하면 동영상 링크로 이동.)
<br/><br/>이 기능의 구체적인 구현 방법은 이후 하드웨어 및 회로 설명, 코드 설명에서 설명하기로 한다.

(시연 - 주파수 반응, 노래 반응)

<h2>4. 주요 하드웨어 요소 및 회로 설명</h2>

<b>1.릴레이 설명</b>

12V 짜리 워터펌프 4개를 써야 했기 때문에, 무조건 외부전원이 필요했다.<br/>
아두이노의 5V 출력 전압은 코딩을 통해 손쉽게 On Off 제어가 가능하다. 하지만 외부전원은 그렇지가 않다.
이를 가능하게 해주는것이 릴레이라는 부품이다.<br/>
<img src="../images/relay.jpg" width="300" height="300"/>
<br/>이렇게 생긴 애다. 이렇게 생긴 애를 다음과 같은 구조로 회로를 구성하면,
<img src="../images/relaycircuit.png" width="500" height="300"/><br/>
아두이노 보드를 통해서 외부전원의 On Off 를 제어할 수 있게 된다. 원리는 단순히 전자석을 이용한 기계적인 원리라고 한다. 그래서 탁 탁 소리가 남.
<br/><br/>
<b>2.녹화 및 재생 회로</b>
이번 프로젝트는 기능이 크게 두가지인 만큼, 아두이노도 두개를 써야 했다.
첫번째 아두이노 회로는 '녹화 및 재생 기능'을 구현한 회로이다.<br/>
<img src="../images/circuits/circuit1.png" width="400" height="400"/><br/>
단순히 스위치를 누르면, 릴레이가 켜지는 기능은 손쉽게 구현할 수 있다.<br/><br/>
<b>3.음악 반응 기능</b>
두번째 기능을 구현하기 위해서는 또다른 별도의 아두이노를 써야 했다.<br/>
<img src="../images/circuits/circuit2.png" width="400" height="400" /><br/>
여기서 새로운 부품이 필요하게 됐다. 오디오 스펙트럼을 분석해주는 쉴드가 그것이었다. 제품 링크는 여기다(<a href="https://www.sparkfun.com/products/13116">#</a>). 직구하거나 전문 수입 업체에서 구매해야된다.<br/>
<img src="../images/spectrumShield.jpg" width="400" height="400" /><br/>
이런 모양이다. (오디오 입출력 케이블 꽂는 규격 등등 말로 설명할 것)<br/>
이 쉴드에서 제일 핵심적인 기능을 하는 부품은 이것이다.
<img src="../images/IC.jpg" width="500" height="220" /><br/>
이 부품은 입력된 오디오 신호를, 소리의 대역폭을 아래 그래프와 같이 7종류로 나눈 후 소리의 크기를 변수에 저장해준다.
<img src="../images/Graph1.jpg" width="500" height="270" /><br/>

<h2>5. 코드 설명</h2>

1. 코드1: <a href="../code/arduino1/Record_and_Play.ino">#</a>
<br/><br/>
2. 코드2: <a href="../code/arduino2/spectrum.ino">#</a>
<br/>
(녹화 및 재생 원리 설명할 것)<br/>
(오디오 스펙트럼이랑 워터펌프 연결시킨 구조 설명할 것)<br/>
(참고그림)<br/>
<img src="../images/Graph2.jpg" width="500" height="400" /><br/>


<h2>6. 맞닥뜨리게 된 문제들, 그리고 그로부터 배운 것들</h2>

1. 고전압시 브레드보드 사용 불가 문제(병렬회로를 납땜으로 대체해야 함)<br/>
2. 고전압 사용시 조금만 실수해도 아두이노 고장이 매우 쉽게 일어남<br/>
3. 워터펌프를 수직으로 배치하면 물 분사가 잘 안됨
